<div id="review-screen-container">
    <div class="review-container">
        <div id="review-preview-wrapper">
            <div id="review-preview" class="preview-container">
                <div id="review-photos-container"></div>
                <img id="review-template-overlay" src="" alt="Template Overlay">
            </div>
        </div>
        <div id="zoom-controls">
            <button id="zoom-out-btn">-</button>
            <input type="range" id="zoom-slider" min="100" max="300" value="100" step="1">
            <button id="zoom-in-btn">+</button>
            <span id="zoom-level-indicator">100%</span>
        </div>
    </div>

    <div id="review-sidebar">
        <!-- PC Resize Handle (Left edge) -->
        <div id="resize-handle-pc"></div>

        <!-- Main Content Column -->
        <div id="sidebar-content">
            <!-- Mobile Resize Handle (Top edge) -->
            <div id="resize-handle-mobile">
                <div class="handle-bar"></div>
            </div>

            <!-- Panels Container -->
            <div id="strip-container">
                <button id="strip-back-btn" class="strip-back-btn" style="display: none !important;">&lt;</button>
                <div id="review-thumbnails" class="strip-panel photo-strip-scroll-box" data-panel="photos"></div>
                <div id="template-gallery-review" class="strip-panel photo-strip-scroll-box" data-panel="templates">
                </div>
                <div id="color-palette-panel" class="strip-panel photo-strip-scroll-box" data-panel="colors"></div>
                <div id="style-strip-panel" class="strip-panel photo-strip-scroll-box" data-panel="styles"></div>
                <div id="filter-preset-strip" class="strip-panel photo-strip-scroll-box" data-panel="filters"></div>
                <div id="sticker-gallery-strip" class="strip-panel photo-strip-scroll-box" data-panel="stickers">
                    <div id="sticker-category-gallery" class="gallery-container"></div>
                    <div id="sticker-gallery" class="gallery-container"></div>
                    <input type="file" id="sticker-upload-input" accept="image/png, image/jpeg" style="display: none;">
                </div>
                <div id="font-gallery-strip" class="strip-panel photo-strip-scroll-box" data-panel="add-text">
                    <div id="font-gallery" class="gallery-container"></div>
                </div>
                <div id="filter-controls-strip" class="strip-panel photo-strip-scroll-box" data-panel="filters">
                    <div id="filter-controls">
                        <div class="filter-slider">
                            <label for="brightness">밝기</label>
                            <input type="range" id="brightness" data-filter="brightness" min="0" max="200" value="100">
                        </div>
                        <div class="filter-slider">
                            <label for="contrast">대비</label>
                            <input type="range" id="contrast" data-filter="contrast" min="0" max="200" value="100">
                        </div>
                        <div class="filter-slider">
                            <label for="saturation">채도</label>
                            <input type="range" id="saturation" data-filter="saturate" min="0" max="200" value="100">
                        </div>
                        <div class="filter-slider">
                            <label for="warmth">따뜻함</label>
                            <input type="range" id="warmth" data-filter="warmth" min="0" max="200" value="100">
                        </div>
                        <div class="filter-slider">
                            <label for="sharpness">선명도</label>
                            <input type="range" id="sharpness" data-filter="sharpness" min="0" max="100" value="0">
                        </div>
                        <div class="filter-slider">
                            <label for="blur">블러</label>
                            <input type="range" id="blur" data-filter="blur" min="0" max="20" value="0">
                        </div>
                        <div class="filter-slider">
                            <label for="grain">그레인</label>
                            <input type="range" id="grain" data-filter="grain" min="0" max="100" value="0">
                        </div>

                    </div>
                </div>
            </div>

            <!-- Actions (Bottom of left column) -->
            <div id="review-actions-container">
                <button id="action-stylize-btn" class="toolbar-btn" style="display: none;" title="Stylize">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" />
                    </svg>
                </button>
                <button id="action-crop-btn" class="toolbar-btn" style="display: none;" title="Crop">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z" />
                    </svg>
                </button>
                <button id="action-remove-bg-btn" class="toolbar-btn" style="display: none;" title="Remove Background">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M2.5 18.5v-1h19v1H2.5z M20.3 5.9l-3.2-3.2c-0.4-0.4-1-0.4-1.4 0l-14.3 14.3c-0.4 0.4-0.4 1 0 1.4l3.2 3.2c0.4 0.4 1 0.4 1.4 0l14.3-14.3c0.4-0.4 0.4-1 0-1.4z M15 4.8L19.2 9 17.5 10.7 13.3 6.5 15 4.8z M5.5 14.3l-0.7 0.7 1.7 1.7 0.7-0.7L5.5 14.3z" />
                    </svg>
                </button>
                <button id="retake-btn" class="toolbar-btn" style="display: none;" title="Retake Selected">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z M12 9c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z" />
                    </svg>
                </button>
                <button id="action-template-color-btn" class="toolbar-btn" style="display: none;"
                    title="Change Template Color">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12 3a9 9 0 0 0 0 18c.83 0 1.5-.67 1.5-1.5 0-.32-.13-.62-.35-.85-.27-.27-.37-.53-.37-.73 0-.55.45-1 1-1h1.5c2.21 0 4-1.79 4-4 0-4.42-3.58-8-8-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />
                    </svg>
                </button>
                <button id="generic-add-btn" style="display: none;">추가</button>
            </div>
        </div>

        <!-- Navigation Rail -->
        <div id="review-navigation">
            <button class="toolbar-btn" data-panel="photos" aria-label="Photos">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
                </svg>
            </button>
            <button class="toolbar-btn" data-panel="templates" aria-label="Templates">
                <svg viewBox="0 0 24 24">
                    <path d="M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z" />
                </svg>
            </button>
            <button class="toolbar-btn" data-panel="stickers" aria-label="Stickers">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9s.67 1.5 1.5 1.5zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
                </svg>
            </button>
            <button class="toolbar-btn" data-panel="filters" aria-label="Filters">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z" />
                </svg>
            </button>
            <button class="toolbar-btn" data-panel="add-text" aria-label="Text">
                <svg viewBox="0 0 24 24">
                    <path d="M5 4v3h5v12h3V7h5V4H5z" />
                </svg>
            </button>

            <!-- Finalize Button (Bottom) -->
            <button id="finalize-btn" class="toolbar-btn primary-action" aria-label="Finalize">
                <svg viewBox="0 0 24 24">
                    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />
                </svg>
            </button>
        </div>
    </div>




    <!-- Add Style Modal -->
    <div id="add-style-modal" class="modal-hidden">
        <div class="modal-content">
            <h3>새 스타일 추가</h3>
            <div>
                <input type="text" id="new-style-name" placeholder="Style Name (e.g., Futuristic)">
            </div>
            <div>
                <textarea id="new-style-prompt" placeholder="Enter a prompt (e.g., a beautiful fantasy landscape)"
                    rows="4"></textarea>
            </div>
            <div class="modal-actions">
                <button id="add-style-confirm-btn">확인</button>
                <button id="add-style-cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <!-- Edit Style Modal -->
    <div id="edit-style-modal" class="modal-hidden">
        <div class="modal-content">
            <h3>스타일 수정</h3>
            <input type="hidden" id="edit-style-id">
            <div>
                <input type="text" id="edit-style-name" placeholder="Style Name (e.g., Futuristic)">
            </div>
            <div>
                <textarea id="edit-style-prompt" placeholder="Enter a prompt (e.g., a beautiful fantasy landscape)"
                    rows="4"></textarea>
            </div>
            <div class="modal-actions">
                <button id="edit-style-confirm-btn">확인</button>
                <button id="edit-style-cancel-btn">취소</button>
            </div>
        </div>
    </div>





    <!-- Add Filter Preset Modal -->
    <div id="add-filter-preset-modal" class="modal-hidden">
        <div class="modal-content">
            <h3>새 필터 프리셋 추가</h3>
            <div class="modal-body">
                <div class="modal-left">
                    <input type="text" id="new-preset-name" placeholder="Preset Name">
                    <div id="preset-filter-controls">
                        <!-- Filter sliders will be dynamically inserted here -->
                    </div>
                </div>
                <div class="modal-right">
                    <div id="preset-preview"></div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="add-preset-confirm-btn">확인</button>
                <button id="add-preset-cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <!-- Add Sticker Category Modal -->
    <div id="add-sticker-category-modal" class="modal-hidden">
        <div class="modal-content">
            <h3>새 스티커 카테고리 추가</h3>
            <div>
                <input type="text" id="new-category-name" placeholder="Category Name">
            </div>
            <div class="modal-actions">
                <button id="add-category-confirm-btn">확인</button>
                <button id="add-category-cancel-btn">취소</button>
            </div>
        </div>
    </div>
</div>